/*! tuiterFighter - v0.1.0 - 2012-09-15
* http://tuiterfighter.com
* Copyright (c) 2012 Pablo Novas; Licensed XXX */
var fighter=fighter||{};fighter.fightStates=fighter.fightStates||{},fighter.fightStates.idle="idle",fighter.fightStates.waiting="waiting",fighter.fightStates.startFight="startFight",fighter.fightStates.fighting="fighting",fighter.fightStates.tweet="tweet",fighter.fightStates.endFight="endFight",fighter.birdStates=fighter.birdStates||{},fighter.birdStates.angry="angry",fighter.birdStates.calm="calm",fighter.birdStates.dead="dead",fighter.clockStates=fighter.clockStates||{},fighter.clockStates.stoped="stoped",fighter.clockStates.runing="runing";var fighter=fighter||{};fighter.config=fighter.config||{},fighter.config.bird=fighter.config.bird||{},fighter.config.bird.sizes=function(){return{body:{width:150,height:200},leftPunch:{width:300,height:100},rightPunch:{width:300,height:100},leftWing:{width:150,height:100},rightWing:{width:150,height:100},eye:{width:40,height:30},beak:{width:40,height:30},tail:{width:80,height:44},legs:{width:80,height:60},fire:{width:90,height:140}}}();var fighter=fighter||{};fighter.config=fighter.config||{},fighter.config.bird=fighter.config.bird||{},fighter.config.bird.tiles=function(){return{body:[{x:0,y:0},{x:150,y:0},{x:300,y:0},{x:450,y:0},{x:600,y:0}],leftPunch:[{x:750,y:100},{x:1050,y:100}],rightPunch:[{x:750,y:0},{x:1050,y:0}],leftWing:[{x:0,y:300},{x:150,y:300},{x:300,y:300},{x:450,y:300},{x:600,y:300},{x:750,y:300},{x:900,y:300},{x:1050,y:300},{x:1200,y:300}],rightWing:[{x:0,y:200},{x:150,y:200},{x:300,y:200},{x:450,y:200},{x:600,y:200},{x:750,y:200},{x:900,y:200},{x:1050,y:200},{x:1200,y:200}],legs:[{x:0,y:400},{x:80,y:400},{x:160,y:400},{x:240,y:400},{x:320,y:400}],tail:[{x:640,y:400},{x:720,y:400},{x:800,y:400},{x:880,y:400},{x:960,y:400},{x:1040,y:400}],beak:[{x:400,y:400},{x:440,y:400},{x:480,y:400},{x:520,y:400},{x:560,y:400},{x:600,y:400}],eye:[{x:400,y:430},{x:440,y:430},{x:480,y:430},{x:520,y:430},{x:560,y:430},{x:600,y:430}],fire:[{x:0,y:460},{x:90,y:460},{x:180,y:460}]}}();var fighter=fighter||{};fighter.config=fighter.config||{},fighter.config.bird=fighter.config.bird||{},fighter.config.bird.frames=function(){var e=fighter.config.bird.tiles;return{a:{body:{tile:e.body[0],x:50,y:20},leftWing:{tile:e.leftWing[0],x:30,y:90},rightWing:{tile:e.rightWing[0],x:30,y:100},eye:{tile:e.eye[0],x:125,y:50},beak:{tile:e.beak[0],x:142,y:72},tail:{tile:e.tail[0],x:20,y:180},legs:{tile:e.legs[0],x:75,y:175}},b:{body:{tile:e.body[1],x:51,y:12},leftWing:{tile:e.leftWing[1],x:21,y:82},rightWing:{tile:e.rightWing[1],x:21,y:92},eye:{tile:e.eye[1],x:130,y:42},beak:{tile:e.beak[1],x:153,y:64},tail:{tile:e.tail[1],x:20,y:165},legs:{tile:e.legs[1],x:76,y:175}},c:{body:{tile:e.body[1],x:51,y:6},leftWing:{tile:e.leftWing[2],x:11,y:72},rightWing:{tile:e.rightWing[2],x:11,y:82},eye:{tile:e.eye[2],x:130,y:36},beak:{tile:e.beak[2],x:152,y:60},tail:{tile:e.tail[2],x:26,y:157},legs:{tile:e.legs[2],x:76,y:165}},d:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[3],x:15,y:72},rightWing:{tile:e.rightWing[3],x:15,y:82},eye:{tile:e.eye[3],x:145,y:38},beak:{tile:e.beak[3],x:163,y:63},tail:{tile:e.tail[3],x:16,y:157},legs:{tile:e.legs[3],x:76,y:165}},e:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[3],x:15,y:72},rightWing:{tile:e.rightWing[3],x:15,y:82},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},f:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[4],x:15,y:72},rightWing:{tile:e.rightWing[4],x:15,y:82},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[3],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hra:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[1],x:15,y:80},rightWing:{tile:e.rightWing[5],x:25,y:85},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hrb:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:80},rightWing:{tile:e.rightWing[6],x:75,y:85},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hrc:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[3],x:15,y:80},rightWing:{tile:e.rightWing[7],x:95,y:70},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hrd:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[4],x:15,y:80},rightWing:{tile:e.rightWing[8],x:125,y:30},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hre:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[4],x:15,y:80},rightPunch:{tile:e.rightPunch[0],x:-18,y:30},fire:{tile:e.fire[0],x:200,y:0},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hrf:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[4],x:15,y:80},rightPunch:{tile:e.rightPunch[1],x:-18,y:30},fire:{tile:e.fire[1],x:200,y:0},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hrg:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[4],x:15,y:80},rightPunch:{tile:e.rightPunch[1],x:-18,y:30},fire:{tile:e.fire[2],x:200,y:0},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hla:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[5],x:25,y:85},rightWing:{tile:e.rightWing[1],x:15,y:80},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hlb:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[6],x:75,y:85},rightWing:{tile:e.rightWing[2],x:15,y:80},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hlc:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[7],x:95,y:70},rightWing:{tile:e.rightWing[3],x:15,y:80},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hld:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[8],x:125,y:30},rightWing:{tile:e.rightWing[4],x:15,y:80},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hle:{body:{tile:e.body[2],x:51,y:6},leftPunch:{tile:e.leftPunch[0],x:-18,y:30},fire:{tile:e.fire[0],x:200,y:0},rightWing:{tile:e.rightWing[4],x:15,y:80},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hlf:{body:{tile:e.body[2],x:51,y:6},leftPunch:{tile:e.leftPunch[1],x:-18,y:30},fire:{tile:e.fire[1],x:200,y:0},rightWing:{tile:e.rightWing[4],x:15,y:80},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hlg:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[8],x:125,y:30},fire:{tile:e.fire[2],x:200,y:0},rightWing:{tile:e.rightWing[4],x:15,y:80},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},hurtA:{translate:{x:10,y:0},rotate:{angle:-10,x:-240,y:-150},body:{tile:e.body[3],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:72},rightWing:{tile:e.rightWing[2],x:15,y:82},eye:{tile:e.eye[5],x:140,y:38},beak:{tile:e.beak[5],x:160,y:60},tail:{tile:e.tail[5],x:16,y:158},legs:{tile:e.legs[3],x:76,y:165}},hurtB:{translate:{x:20,y:0},rotate:{angle:-10,x:-240,y:-150},body:{tile:e.body[4],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:72},rightWing:{tile:e.rightWing[2],x:15,y:82},eye:{tile:e.eye[5],x:137,y:38},beak:{tile:e.beak[5],x:158,y:60},tail:{tile:e.tail[5],x:16,y:158},legs:{tile:e.legs[3],x:76,y:165}},fpa:{body:{tile:e.body[2],x:51,y:6},leftPunch:{tile:e.leftPunch[0],x:-18,y:30},rightPunch:{tile:e.rightPunch[0],x:-23,y:40},fire:{tile:e.fire[0],x:200,y:0},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},fpb:{body:{tile:e.body[2],x:51,y:6},leftPunch:{tile:e.leftPunch[1],x:-18,y:30},rightPunch:{tile:e.rightPunch[1],x:-23,y:40},fire:{tile:e.fire[1],x:200,y:0},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},fpc:{body:{tile:e.body[2],x:51,y:6},leftPunch:{tile:e.leftPunch[1],x:-18,y:30},rightPunch:{tile:e.rightPunch[1],x:-23,y:40},fire:{tile:e.fire[2],x:200,y:0},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},fpd:{body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[8],x:125,y:30},rightWing:{tile:e.rightWing[8],x:120,y:40},eye:{tile:e.eye[4],x:146,y:38},beak:{tile:e.beak[4],x:164,y:63},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[4],x:76,y:165}},gfpa:{translate:{x:10,y:10},rotate:{angle:-10,x:-240,y:-150},body:{tile:e.body[3],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:72},rightWing:{tile:e.rightWing[2],x:15,y:82},eye:{tile:e.eye[5],x:140,y:38},beak:{tile:e.beak[5],x:160,y:60},tail:{tile:e.tail[5],x:16,y:158},legs:{tile:e.legs[3],x:76,y:165}},gfpb:{translate:{x:100,y:50},rotate:{angle:-20,x:-250,y:-110},body:{tile:e.body[4],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:72},rightWing:{tile:e.rightWing[2],x:15,y:82},eye:{tile:e.eye[5],x:137,y:38},beak:{tile:e.beak[5],x:158,y:60},tail:{tile:e.tail[5],x:16,y:158},legs:{tile:e.legs[3],x:76,y:165}},gfpc:{translate:{x:150,y:80},rotate:{angle:-30,x:-280,y:-60},body:{tile:e.body[4],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:72},rightWing:{tile:e.rightWing[2],x:15,y:82},eye:{tile:e.eye[5],x:137,y:38},beak:{tile:e.beak[5],x:158,y:60},tail:{tile:e.tail[5],x:16,y:158},legs:{tile:e.legs[3],x:76,y:165}},gfpd:{translate:{x:200,y:120},rotate:{angle:-45,x:-320,y:10},body:{tile:e.body[4],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:72},rightWing:{tile:e.rightWing[2],x:15,y:82},eye:{tile:e.eye[5],x:137,y:38},beak:{tile:e.beak[5],x:158,y:60},tail:{tile:e.tail[5],x:16,y:158},legs:{tile:e.legs[3],x:76,y:165}},gfpe:{translate:{x:230,y:190},rotate:{angle:-70,x:-320,y:110},body:{tile:e.body[4],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:72},rightWing:{tile:e.rightWing[2],x:15,y:82},eye:{tile:e.eye[5],x:137,y:38},beak:{tile:e.beak[5],x:158,y:60},tail:{tile:e.tail[5],x:16,y:158},legs:{tile:e.legs[3],x:76,y:165}},gfpf:{translate:{x:230,y:220},rotate:{angle:-80,x:-360,y:150},body:{tile:e.body[4],x:51,y:6},leftWing:{tile:e.leftWing[2],x:15,y:72},rightWing:{tile:e.rightWing[2],x:15,y:82},eye:{tile:e.eye[5],x:137,y:38},beak:{tile:e.beak[5],x:158,y:60},tail:{tile:e.tail[5],x:16,y:158},legs:{tile:e.legs[3],x:76,y:165}},gfpg:{hidden:!0},flya:{translate:{x:20,y:20},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[0],x:30,y:90},rightWing:{tile:e.rightWing[0],x:30,y:100},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[1],x:162,y:62},tail:{tile:e.tail[5],x:16,y:156},legs:{tile:e.legs[2],x:76,y:165}},flyb:{translate:{x:40,y:40},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[1],x:21,y:82},rightWing:{tile:e.rightWing[1],x:21,y:92},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[2],x:162,y:62},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[2],x:74,y:163}},flyc:{translate:{x:60,y:60},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[2],x:11,y:72},rightWing:{tile:e.rightWing[2],x:11,y:82},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[1],x:162,y:62},tail:{tile:e.tail[3],x:16,y:156},legs:{tile:e.legs[2],x:76,y:165}},flyd:{translate:{x:80,y:80},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[0],x:30,y:90},rightWing:{tile:e.rightWing[0],x:30,y:100},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[1],x:162,y:62},tail:{tile:e.tail[5],x:16,y:156},legs:{tile:e.legs[2],x:76,y:165}},flye:{translate:{x:100,y:100},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[1],x:21,y:82},rightWing:{tile:e.rightWing[1],x:21,y:92},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[2],x:162,y:62},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[2],x:74,y:163}},flyf:{translate:{x:120,y:120},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[2],x:11,y:72},rightWing:{tile:e.rightWing[2],x:11,y:82},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[1],x:162,y:62},tail:{tile:e.tail[3],x:16,y:156},legs:{tile:e.legs[2],x:76,y:165}},flyg:{translate:{x:160,y:160},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[0],x:30,y:90},rightWing:{tile:e.rightWing[0],x:30,y:100},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[1],x:162,y:62},tail:{tile:e.tail[5],x:16,y:156},legs:{tile:e.legs[2],x:76,y:165}},flyh:{translate:{x:180,y:180},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[1],x:21,y:82},rightWing:{tile:e.rightWing[1],x:21,y:92},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[2],x:162,y:62},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[2],x:74,y:163}},flyi:{translate:{x:200,y:200},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[2],x:11,y:72},rightWing:{tile:e.rightWing[2],x:11,y:82},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[1],x:162,y:62},tail:{tile:e.tail[3],x:16,y:156},legs:{tile:e.legs[2],x:76,y:165}},flyj:{translate:{x:240,y:240},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[0],x:30,y:90},rightWing:{tile:e.rightWing[0],x:30,y:100},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[1],x:162,y:62},tail:{tile:e.tail[5],x:16,y:156},legs:{tile:e.legs[2],x:76,y:165}},flyk:{translate:{x:260,y:260},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[1],x:21,y:82},rightWing:{tile:e.rightWing[1],x:21,y:92},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[2],x:162,y:62},tail:{tile:e.tail[4],x:16,y:156},legs:{tile:e.legs[2],x:74,y:163}},flyl:{translate:{x:280,y:280},body:{tile:e.body[2],x:51,y:6},leftWing:{tile:e.leftWing[2],x:11,y:72},rightWing:{tile:e.rightWing[2],x:11,y:82},eye:{tile:e.eye[5],x:146,y:38},beak:{tile:e.beak[1],x:162,y:62},tail:{tile:e.tail[3],x:16,y:156},legs:{tile:e.legs[2],x:76,y:165}}}}();var fighter=fighter||{};fighter.config=fighter.config||{},fighter.config.bird=fighter.config.bird||{},fighter.config.bird.animations=function(){var e=fighter.config.bird.frames;return{idle:{runTimes:0,framesPerStep:7,frames:[e.a]},getAngry:{runTimes:1,framesPerStep:4,frames:[e.a,e.b,e.c,e.d,e.e,e.f]},calmDown:{runTimes:1,framesPerStep:7,frames:[e.f,e.e,e.d,e.c,e.b,e.a]},angry:{runTimes:0,framesPerStep:4,frames:[e.e,e.f]},beginHitRight:{runTimes:1,framesPerStep:3,frames:[e.hre,e.hrf,e.hrg]},endHitRight:{runTimes:1,framesPerStep:1,frames:[e.hrd,e.hrd,e.hrd]},revertHitRight:{runTimes:1,framesPerStep:1,frames:[e.hrc,e.hrb,e.hra]},beginHitLeft:{runTimes:1,framesPerStep:3,frames:[e.hle,e.hlf,e.hlg]},endHitLeft:{runTimes:1,framesPerStep:1,frames:[e.hld,e.hld,e.hld]},revertHitLeft:{runTimes:1,framesPerStep:1,frames:[e.hlc,e.hlb,e.hla]},getHit:{runTimes:1,framesPerStep:3,frames:[e.hurtA,e.hurtB,e.hurtB,e.hurtB,e.hurtA]},finalPunch:{runTimes:1,framesPerStep:3,frames:[e.fpa,e.fpb,e.fpc,e.fpd,e.fpd]},frozenFinalPunch:{runTimes:0,framesPerStep:3,frames:[e.fpd]},getFinalPunch:{runTimes:1,framesPerStep:1,frames:[e.hurtA,e.gfpa,e.gfpb,e.gfpc]},frozenGetFinalPunch:{runTimes:0,framesPerStep:3,frames:[e.gfpc]},finishGetFinalPunch:{runTimes:1,framesPerStep:1,frames:[e.gfpd,e.gfpe,e.gfpf,e.gfpg]},hidden:{runTimes:0,framesPerStep:1,frames:[e.gfpg]},flyAway:{runTimes:1,framesPerStep:3,frames:[e.flya,e.flyb,e.flyc,e.flyd,e.flye,e.flyf,e.flyg,e.flyh,e.flyi,e.flyj,e.flyk,e.flyl]},test:{runTimes:0,framesPerStep:3,frames:[e.flya,e.flyb]}}}();var fighter=fighter||{};fighter.config=fighter.config||{},fighter.config.text=fighter.config.text||{},fighter.config.text.sizes={hitNbo:{width:60,height:60},hits:{width:60,height:60}};var fighter=fighter||{};fighter.config=fighter.config||{},fighter.config.text=fighter.config.text||{},fighter.config.text.tiles=function(){var e=fighter.config.text.sizes;tiles={},tiles.hitNbo=[];for(var t=0;t<=9;t++)tiles.hitNbo.push({x:t*e.hitNbo.width,y:0});return tiles.hits={x:600,y:0},tiles}();var fighter=fighter||{};fighter.config=fighter.config||{},fighter.config.clock=fighter.config.clock||{},fighter.config.clock.sizes={sphere:{width:100,height:100},number:{width:40,height:50},legend:{width:110,height:25},time:{width:50,height:20}};var fighter=fighter||{};fighter.config=fighter.config||{},fighter.config.clock=fighter.config.clock||{},fighter.config.clock.tiles=function(){var e=fighter.config.clock.sizes;tiles={},tiles.bars=[];for(var t=2;t<=6;t++)tiles.bars.push({x:t*e.sphere.width,y:0});tiles.bg={x:0,y:0},tiles.front={x:100,y:0},tiles.numbersY=[];for(var t=0;t<=9;t++)tiles.numbersY.push({x:t*e.number.width,y:100});tiles.numbersR=[];for(var t=0;t<=9;t++)tiles.numbersR.push({x:t*e.number.width,y:100+e.number.height});return tiles.timeY={x:415,y:105},tiles.timeR={x:415,y:155},tiles.legend={x:500,y:100},tiles}();var fighter=fighter||{};fighter.repository=function(){var e={},t=0,n=function(){return Object.keys(e).length},r={complete:function(){},report:function(){},error:function(){}},i=function(){var e=++t*100/n();r.report(e),e>=100&&r.complete()},s=function(e,t){r.error(e,t)};return{on:function(e,t){return r[e]&&(r[e]=t),this},loadOne:function(t,n,r){var i=n||function(){},s=r||function(){};if(!t)throw"Parameter 'name' not specify";if(!e[t])throw"Resource "+t+" not found!. Use addReource() before load.";return this[t]=new Image,this[t].onload=i,this[t].onerror=s,this[t].src=e[t],this[t].complete&&i(),this},load:function(){t=0;for(var n in e)this[n]=new Image,this[n].onload=i,this[n].onerror=s,this[n].src=e[n],this[n].complete&&i();return this},addResources:function(t){for(var n in t){if(e.hasOwnProperty(n))throw"The resource "+n+" already exists.";e[n]=t[n]}return this},clear:function(){var t=n();do this[e[t]]&&(this[e[t]]=null,delete this[e[t]]);while(t--);e={}}}}();var fighter=fighter||{};fighter.HitManager=function(e){function h(e,t){c=!0;var t=t||"blue";fighter.splash.run("hit",{phrase:e,side:i.side,color:t},function(){c=!1})}var t=e||{},n="text",r=fighter.config.text,i={y:t.attrs.top||0,x:t.attrs.left||0,width:t.attrs.width||r.sizes.hitNbo.width,height:t.attrs.height||r.sizes.hitNbo.height,legendSpace:50,nboSpace:-30,hy:r.tiles.hitNbo[0].y,side:t.side||"left"},s=0,o=2e3,u=null,a=[],f=!1,l=!1,c=!1;this.update=function(){var e=r.tiles.hitNbo;a=[],f&&(h("First Attack!","yellow"),f=!1),l&&(h("Danger!","red"),l=!1);if(s>1){s>99&&a.push(e[parseInt(s.toString().charAt(2),10)].x),s>9&&a.push(e[parseInt(s.toString().charAt(1),10)].x),a.push(e[parseInt(s.toString().charAt(0),10)].x);if(!c){var t=Math.round(Math.random());switch(s){case 2:case 5:t?h("Yes!"):h("Good!");break;case 10:case 15:t?h("Cool!"):h("Great!");break;case 20:case 25:t?h("Stylish!"):h("Viewtiful!");break;case 30:case 35:case 40:t?h("Excelent!"):h("Wooooow!");break;case 45:case 50:h("Tuiterous!")}}}},this.draw=function(){var e,t,s,o;if(a.length>0){e=fighter.match.context(),t=fighter.repository[n],s=r.sizes.hitNbo.width,o=r.sizes.hitNbo.height;for(var u=a.length-1;u>=0;u--)e.drawImage(t,a[u],i.hy,s,o,i.x+u*i.nboSpace,i.y,s,o);e.drawImage(t,r.tiles.hits.x,r.tiles.hits.y,s,o,i.x+i.legendSpace,i.y,s,o)}},this.punch=function(){s++,clearTimeout(u),u=setTimeout(function(){s=0},o)},this.firstPunch=function(){f=!0},this.danger=function(){l=!0},this.reset=function(){s=0}};var fighter=fighter||{};fighter.Animation=function(e){var t=e.resName,n=e.frames,r=e.runTimes||0,i=e.framesPerStep||1,s=e.framesPerRound||0,o=0,u=e.firstStep||0,a=n.length-1,f=!1,l=0,c=0,h=!1,p=[];e.endCallback&&p.push(e.endCallback),this.update=function(){c++,s&&h?c>s&&(c=0,h=!1,l++):c>i&&(c=0,o++,o>a&&(o=0,r&&r===l&&this.stop(),h=!0))},this.draw=function(e,r,i,s,u){var a=fighter.match.context(),f=fighter.config.bird.sizes,l=fighter.repository[t],c=n[o],h=["leftWing","leftPunch","legs","tail","body","eye","beak","rightPunch","rightWing","fire"];if(!c.hidden)for(var p=0;p<h.length;p++){var d=h[p],v=f[d],m=c[d];if(!m)continue;var g=v.width,y=v.height,b=m.tile.x,w=m.tile.y,E=m.x+e,S=m.y+r;a.save(),u===-1&&(a.translate(e*2+i,0),a.scale(-1,1)),c.rotate&&(u===-1?(a.translate(e/2-i,r*2.4-s-c.rotate.y*-1),a.rotate(c.rotate.angle*Math.PI/180)):(a.translate(e+c.rotate.x,r+c.rotate.y),a.rotate(c.rotate.angle*Math.PI/180))),c.translate&&(E+=-1*u*c.translate.x*u,S+=-1*u*c.translate.y*u),a.drawImage(l,b,w,g,y,E,S,g,y),a.restore()}},this.start=function(){l=1,c=0,o=u,f=!0},this.kill=function(){f=!1},this.stop=function(){f=!1;for(var e=0;e<p.length;e++)p[e]()},this.isRunning=function(){return f},this.addEndCallback=function(e){p=[],p.push(e)}};var fighter=fighter||{};fighter.Bird=function(e){var t=e||{},n={y:t.attrs.top||0,x:t.attrs.left||0,width:t.attrs.width||50,height:t.attrs.height||50,dir:t.dir||1},r=t.resourceTiles,i=n.dir>0?"left":"right",s=0,o=null,u=0,a=$(".statusBar."+i),f={},l="idle",c=function(){for(var e in fighter.config.bird.animations){var t=fighter.config.bird.animations[e];t.resName=r,f[e]=new fighter.Animation(t)}};c();var h=n.dir>0?-120:300,p=new fighter.HitManager({attrs:{top:n.y+40,left:n.x+h},side:i});this.update=function(){var e=f[l];e?e.isRunning()?e.update():e.start():l="idle",p.update()},this.draw=function(){var e=fighter.match.context();f[l]&&f[l].draw(n.x,n.y,n.width,n.height,n.dir),p.draw()},this.name=function(e){$(".word div",a).text(e)},this.setOponent=function(e){o=e},this.getAngry=function(){f.getAngry.addEndCallback(function(){l="angry"}),l="getAngry"},this.beAngry=function(){f[l].kill(),l="angry"},this.beIdle=function(){f[l].kill(),l="idle"},this.calmDown=function(e){f.calmDown.addEndCallback(function(){l="idle",e&&e()}),l="calmDown"},this.getHit=function(){p.reset(),u<10&&u>7&&p.danger(),f.getHit.addEndCallback(function(){l="angry"}),f[l].kill(),l="getHit"},this.hit=function(){var e="Right";s++,u===100&&o.life()<100&&o.life()>=98&&p.firstPunch(),p.punch(),s%2===0&&(e="Left"),f["beginHit"+e].addEndCallback(function(){l="endHit"+e}),f["endHit"+e].addEndCallback(function(){l="revertHit"+e}),f["revertHit"+e].addEndCallback(function(){l="angry"}),f[l].kill(),l="beginHit"+e,o.getHit()},this.life=function(e){var t=100;return e===undefined?u:(u=e,u>100&&(u=100),u>50?t=u+u*1.1/5:u>30?t=u+u*1.1/4:u>10?t=u+u*1.1/3:t=u+u*1.1/2,t>100&&(t=100),u<0&&(u=0,t=0),$(".life",a).css("width",u+"%"),$(".life-min",a).css("width",t+"%"),this)},this.finalPunch=function(e){var t=this;f.finalPunch.addEndCallback(function(){p.reset(),l="frozenFinalPunch",e()}),f[l].kill(),l="finalPunch",o.getFinalPunch()},this.getFinalPunch=function(){p.reset(),f.getFinalPunch.addEndCallback(function(){l="frozenGetFinalPunch"}),f[l].kill(),l="getFinalPunch"},this.finishFinalPunch=function(e){var t=this;f[l].kill(),o.finishGetFinalPunch(),p.reset(),t.calmDown(e)},this.finishGetFinalPunch=function(){f.finishGetFinalPunch.addEndCallback(function(){l="hidden"}),f[l].kill(),l="finishGetFinalPunch"},this.flyAway=function(){f.flyAway.addEndCallback(function(){l="hidden"}),f[l].kill(),l="flyAway"},this.test=function(){l="test"}};var fighter=fighter||{};fighter.clock=function(){var e,t,n,r,i=!1,s=0,o=3,u=!1,a=!1,f=10,l=0,c=3,h=fighter.config.clock.tiles.timeY;return seconds=0,nboSpace=-25,nbos=[],{init:function(i,s,o,u){r=i,e=s,t=o,n=u?t:e},show:function(r){r?(n=e,u=!0,a=!1):n=t},hide:function(){animated?(n=t,u=!1,a=!0):n=e},start:function(){i=!0},stop:function(){i=!1},update:function(){if(u)n+=f,n==t&&(u=!1);else if(a)n-=f,n==e&&(a=!1);else if(i){var r=fighter.config.clock.tiles,p=r.numbersY;h=r.timeY,seconds<15&&(p=r.numbersR,h=r.timeR),nbos=[],seconds>=0&&(seconds>9&&nbos.push({x:p[parseInt(seconds.toString().charAt(1),10)].x,y:p[parseInt(seconds.toString().charAt(1),10)].y}),nbos.push({x:p[parseInt(seconds.toString().charAt(0),10)].x,y:p[parseInt(seconds.toString().charAt(0),10)].y}),seconds<=9&&nbos.push({x:p[0].x,y:p[0].y})),s++,s>o&&(s=0,l++,l>4&&(l=0),c--,c<0&&(c=4))}},draw:function(){var e=fighter.match.context(),t=fighter.config.clock.sizes,i=t.sphere.width,s=t.sphere.height,o=fighter.repository.clock,u=fighter.config.clock.tiles,a=u.bars[l],f=u.bars[c],p=u.bg,d=u.front,v=t.number.width,m=t.number.height;e.drawImage(o,f.x,f.y,i,s,r,n,i,s),e.drawImage(o,p.x,p.y,i,s,r,n,i,s),e.drawImage(o,a.x,a.y,i,s,r,n,i,s),e.drawImage(o,d.x,d.y,i,s,r,n,i,s),e.drawImage(o,h.x,h.y,t.time.width,t.time.height,r+28,n,t.time.width,t.time.height),e.drawImage(o,u.legend.x,u.legend.y,t.legend.width,t.legend.height,r,n+62,t.legend.width,t.legend.height);for(var g=nbos.length-1;g>=0;g--)e.drawImage(o,nbos[g].x,nbos[g].y,v,m,r+42+g*nboSpace,n+20,v,m)},setTime:function(e){seconds=e},getTime:function(){return seconds}}}();var fighter=fighter||{};fighter.stage=function(){var e,t,n=function(){function e(e){var t=$("<div>").addClass("statusBar").addClass(e),n=$("<div>").addClass("life-ctn"),r=$("<div>").addClass("life"),i=$("<div>").addClass("life-min"),s=$("<div>").addClass("glass"),o=$("<div>").addClass("word").append($("<div>"));n.append(r).append(i).append(s),t.append(n).append(o).appendTo("#fighter-ctn").addClass("hidden")}e("left"),e("right")},r=function(){var n=175,r=200;e=new fighter.Bird({resourceTiles:"bird",dir:1,attrs:{top:r,left:n,width:250,height:250}}),t=new fighter.Bird({resourceTiles:"bird",dir:-1,attrs:{top:r,left:n+200,width:250,height:250}}),e.setOponent(t),t.setOponent(e)};return{create:function(){n(),r(),fighter.clock.init(350,-100,20,!1)},update:function(){e.update(),t.update(),fighter.clock.update()},draw:function(){var n=fighter.match.context();n.drawImage(fighter.repository.frustum,0,390,800,80),e.draw(),t.draw(),fighter.clock.draw()},birds:{left:function(){return e},right:function(){return t}},showControls:function(e){fighter.clock.show(e),$(".statusBar").removeClass("hidden")},hideControls:function(e){fighter.clock.hide(e),$(".statusBar").addClass("hidden")}}}();var fighter=fighter||{};fighter.splash=function(){var e={ready:function(){var e="Ready!";$("div.ready").remove();var t=$("<div>").addClass("ready");for(var n=0;n<e.length;n++)$("<span>").addClass("A").addClass("x"+n).text(e.charAt(n)).appendTo(t);t.appendTo("#fighter-ctn")},fight:function(){var e="Fight!";$("div.fight").remove(),$("<div>").addClass("fight").addClass("A").text(e).appendTo("#fighter-ctn")},knockout:function(){var e="K.O.";$("div.ko").remove(),$("<div>").addClass("ko").text(e).appendTo("#fighter-ctn")},timesup:function(){var e="Time's Up!";$("div.timesup").remove(),$("<div>").addClass("timesup").text(e).appendTo("#fighter-ctn")},hit:function(){$("div.hitLegend").remove(),$("<div>").addClass("hitLegend").addClass("left").addClass("hide").appendTo("#fighter-ctn"),$("<div>").addClass("hitLegend").addClass("right").addClass("hide").appendTo("#fighter-ctn")}},t={ready:function(e){function i(){n.addClass("C")}function s(){t>5&&(clearInterval(r),e&&e(),setTimeout(i,1100)),n.eq(t).removeClass("A").addClass("B"),t++}var t=0,n=$("div.ready span"),r;r=setInterval(s,300)},fight:function(e){function n(){t.removeClass("B"),e&&e()}var t=$("div.fight");t.addClass("B"),setTimeout(n,1100)},knockout:function(e){$("div.ko").addClass("show"),setTimeout(function(){$("div.ko").removeClass("show"),setTimeout(e,500)},2e3)},timesup:function(e){$("div.timesup").addClass("show"),setTimeout(function(){$("div.timesup").removeClass("show"),setTimeout(e,500)},2e3)},hit:function(e,t){var n=$("div.hitLegend."+t.side),r=t.color||"blue";n.text(t.phrase).removeClass("hide").addClass("show").addClass(r),setTimeout(function(){n.removeClass("show").addClass("hide").removeClass(r),e&&e()},2e3)}};return{create:function(){e.ready(),e.fight(),e.hit(),e.knockout(),e.timesup()},run:function(e,n,r){if(!t[e])throw new Error("Screen '"+e+"' Not Found!");return r||(r=n),t[e](r,n),this}}}();var fighter=fighter||{};fighter.match=function(){var e=0,t,n,r,i,s=function(){fighter.stage.update()},o=function(){i.clearRect(0,0,t.width,t.height),fighter.stage.draw(),n.clearRect(0,0,t.width,t.height),n.drawImage(r,0,0)},u=function(){a();var t=function(){s(),o(),e=window.requestAnimationFrame(t)};t()},a=function(){e&&window.cancelAnimationFrame(e),e=0};return{context:function(){return i},init:function(e){t=document.getElementById(e);if(!t)throw"There is no canvas with id "+e;r=document.createElement("canvas"),r.width=t.width,r.height=t.height;if(!t.getContext)throw"canvas is not supported!";return n=t.getContext("2d"),i=r.getContext("2d"),fighter.stage.create(),this},begin:function(){return u(),fighter.clock.start(),fighter.stage.birds.left().getAngry(),fighter.stage.birds.right().getAngry(),this},end:function(){return fighter.clock.stop(),setTimeout(a,3e3),this},set:function(t){function r(){e||u(),fighter.stage.birds.left().beIdle(),fighter.stage.birds.right().beIdle(),a()}var n=fighter.fightStates;switch(t){case n.idle:case n.waiting:r();break;case n.fighting:e||u(),fighter.stage.showControls(!1),fighter.clock.start(),fighter.stage.birds.left().beAngry(),fighter.stage.birds.right().beAngry()}return this},words:function(e,t){fighter.stage.birds.left().name(e),fighter.stage.birds.right().name(t)},punch:function(e){fighter.stage.birds[e]().hit()},life:function(e,t){fighter.stage.birds.left().life(e),fighter.stage.birds.right().life(t)},tie:function(){fighter.stage.birds.left().calmDown(),fighter.stage.birds.right().calmDown()},timesUp:function(e){fighter.clock.stop(),fighter.splash.run("timesup",e)},winTimesUp:function(e,t){fighter.stage.birds[t]().flyAway(),fighter.stage.birds[e]().calmDown(),setTimeout(function(){fighter.match.end()},3e3)},winPunch:function(e){fighter.stage.birds[e]().finalPunch(function(){fighter.clock.stop(),fighter.splash.run("knockout",function(){fighter.stage.birds[e]().finishFinalPunch(function(){fighter.match.end()})})})},time:function(e){fighter.clock.setTime(e)}}}();var fighter=fighter||{};fighter.manager=function(){var e,t,n,r={ready:function(){}},i=function(){var n=e.resources.sprites,i=e.resources.scenaries[0];fighter.splash.create(),fighter.repository.addResources({bird:n.bird,frustum:i.floor,text:n.hits,clock:n.clock}).on("error",function(e){console.log(e)}).on("report",function(e){console.log(e+"%")}).on("complete",function(){fighter.match.init(t),r.ready()}).load()};return{on:function(e,t){return r[e]&&(r[e]=t),this},load:function(n,r){return t=n,e=r,i(),this},clockTick:function(e){fighter.match.time(e)},update:function(e){var t=e.state,n=fighter.fightStates;switch(t){case n.idle:fighter.match.set(n.idle);break;case n.waiting:fighter.match.set(n.waiting),console.log(e.birds.left.word+" vs "+e.birds.right.word+" in "+e.nextIn+" seconds");break;case n.startFight:fighter.match.words(e.birds.left.word,e.birds.right.word),fighter.stage.showControls(!0),fighter.splash.run("ready",function(){fighter.match.life(e.birds.left.life,e.birds.right.life),fighter.match.begin(),setTimeout(function(){fighter.splash.run("fight",function(){e.state=fighter.fightStates.fighting,fighter.manager.update(e)})},1e3)});break;case n.fighting:fighter.match.words(e.birds.left.word,e.birds.right.word),fighter.match.life(e.birds.left.life,e.birds.right.life),fighter.match.set(n.fighting);break;case n.tweet:var r="left";e.birds.right.hit&&(r="right"),fighter.match.punch(r),fighter.match.life(e.birds.left.life,e.birds.right.life);break;case n.endFight:fighter.match.life(e.birds.left.life,e.birds.right.life),fighter.clock.getTime()===0?fighter.match.timesUp(function(){e.birds.left.life===e.birds.right.life?fighter.match.tie():e.birds.left.life>e.birds.right.life?fighter.match.winTimesUp("left","right"):fighter.match.winTimesUp("right","left")}):e.birds.left.life===0?fighter.match.winPunch("right"):fighter.match.winPunch("left"),fighter.match.set(n.endFight);break;default:throw new Error("Expected: fight state")}}}}();